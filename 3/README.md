基于GitHub Readme Stats快速生成README文档
=======

[![PythonVersion](https://img.shields.io/badge/JavaScript-ES6-orange?logo=JavaScript&style=flat-square)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript)

## 介绍

自从GitHub能够通过README.md自定义显示主页信息后，产生了一个很受追捧的[GitHub Readme Stats](https://github.com/anuraghazra/github-readme-stats
)项目，该项目通过自己的API提供用户信息的可视化，用户只需根据规则写下Markdown或HTML图片标签，就能美观的展示出个人统计信息。但一个个的写比较麻烦，所以本项目提供了JS脚本，只需要用户名就能快速生成Markdown或HTML标签直接使用。而且参数的配置与原项目一致。此外，在快速开始中也提供了更为简洁和人性化的操作。

## 快速开始

复制下列代码（源自`./dist/quickstart.min.js`）到自己的GitHub个人主页(一般是`https://github.com/username`)，然后在浏览器控制台输入即可。
```js
!function(){"use strict";const[t,e]=function(){let t="github-readme-stats.vercel.app";return[()=>t,e=>{"string"==typeof e&&(t=e)}]}();var n={themes:["dark","radical","merko","gruvbox","tokyonight","onedark","cobalt","synthwave"," highcontrast","dracula"],layouts:["default","compact"],setAPI:e,getAPI:t};var i={genHTML:function(t="",e="",n="GitHub Stat Img",i={}){return e||(e=t),`<a href="${e}">\n\t<img ${Reflect.ownKeys(i).map((t=>`${t}="${i[t]}"`)).join(" ")} alt="${n}" src="${t}" />\n</a>`},genMarkdown:function(t="",e="",n="GitHub Stat Img"){return e||(e=t),`[![${n}](${t})](${e})`},setParams:function(t,e){return Reflect.ownKeys(e).forEach((n=>{null!=e[n]&&null!=e[n]&&("string"!=typeof e[n]&&null!=e[n].length?e[n]=e[n].join(",").trim():e[n]=String(e[n]).trim(),t.set(n,e[n]))})),t}};const{themes:r,layouts:o,getAPI:a}=n,{setParams:s}=i;var c={genPinURL:function({username:t="",theme:e="",show_owner:n,repo:i=""}){let o=new URLSearchParams;const c=[...arguments][0]||{};return o=s(o,c),o.set("username",String(t).trim()),o.set("show_owner",Boolean(n)),o.set("repo",String(i)),e=String(e).trim().toLowerCase(),r.includes(e)?o.set("theme",e):o.delete("theme"),`https://${a()}/api/pin/?${o.toString()}`},genStatCardURL:function({username:t="",theme:e,count_private:n,show_icons:i=!0,hide:o=[],link:c=""}={}){let m=new URLSearchParams;const u=[...arguments][0]||{};return m=s(m,u),m.set("username",String(t).trim()),e=String(e).trim().toLowerCase(),r.includes(e)?m.set("theme",e):m.delete("theme"),m.set("count_private",Boolean(n)),m.set("show_icons",Boolean(i)),(o="string"==typeof o?o:(o||[]).join(","))&&m.set("hide",o),`https://${a()}/api?${m.toString()}`},genTopLangsURL:function({username:t="",hide:e=[],hide_title:n,layout:i="compact",card_width:c,theme:m}={}){let u=new URLSearchParams;const g=[...arguments][0]||{};return u=s(u,g),u.set("username",String(t).trim()),u.set("hide_title",Boolean(n)),i=String(i).trim().toLowerCase(),o.includes(i)?u.set("layout",i):u.delete("layout"),i&&u.set("layout",i),c=Number(c),isNaN(c)||u.set("card_width",c),m=String(m).trim().toLowerCase(),r.includes(m)?u.set("theme",m):u.delete("theme"),(e="string"==typeof e?e:(e||[]).map((t=>encodeURIComponent(t))).join(","))&&u.set("hide",e),`https://${a()}/api/top-langs/?${u.toString()}`}};const{genHTML:m}=i,{genPinURL:u,genStatCardURL:g,genTopLangsURL:l}=c;var p={genPinHTML:function(t={}){const e=String(t.username||"").trim(),n=String(t.repo||"").trim(),i=`${e}/${n}`,r="object"==typeof t.imgOpt?t.imgOpt:{};let o;o=t.link?String(t.link||"").trim():`https://github.com/${e}/${n}`;const a=Object.assign({},t);a.imgOpt=void 0,a.link=void 0;const s=u(a);return m(s,o,i,r)},genStatCardHTML:function(t={}){const e=String(t.username||"").trim();String(t.repo||"").trim();const n=g(t),i=`${e}'s GitHub stats`,r="object"==typeof t.imgOpt?t.imgOpt:{},o=String(t.link||"").trim();return m(n,o,i,r)},genTopLangsHTML:function(t={}){const e=String(t.username||"").trim(),n=String(t.link||"").trim(),i=l(t),r=`${e}'s Top Langs`,o="object"==typeof t.imgOpt?t.imgOpt:{};return m(i,n,r,o)}};const{genMarkdown:d}=i,{genPinURL:h,genStatCardURL:f,genTopLangsURL:S}=c;var x={genPinMD:function(t={}){const e=String(t.username||"").trim(),n=String(t.repo||"").trim(),i=h(t),r=`${e}/${n}`;let o;return o=t.link?String(t.link||"").trim():`https://github.com/${e}/${n}`,d(i,o,r)},genStatCardMD:function(t={}){const e=String(t.username||"").trim(),n=String(t.link||"").trim(),i=f(t);return d(i,n,`${e}'s GitHub stats`)},genTopLangsMD:function(t={}){const e=String(t.username||"").trim(),n=String(t.link||"").trim(),i=S(t);return d(i,n,`${e}'s Top Langs`)}};const{themes:b}=n,{genPinHTML:$}=p,{genStatCardMD:w,genTopLangsMD:y,genPinMD:L}=x;var k={quickGen:function(){if(void 0===typeof window)return;if("github.com"!==location.hostname||0!==location.pathname.indexOf("/"))return void alert("当前页面不是你的GitHub主页，无法生成MarkDown");const t=prompt(`请输入生成主题，选项为：${b.join(" ,  ")}`,"").trim().replace(",",""),e=confirm("置顶仓库是否一行二列放置？");let n=!1;e&&(n=confirm("是否使仓库之间具有较大的间隔？"));const i=document.querySelector("span.p-nickname")?.textContent.trim();let r=prompt("热门使用语言中不显示的语言，逗号分割，如：less,html","");r=r.split(","),r=r.length>0?r:void 0;let o={theme:t,username:i},a=[...document.querySelectorAll("span.repo")].map((t=>t.textContent.trim())),s=prompt(`自定义排列，填写序号，逗号分割，如：3,2,1\n${a.map(((t,e)=>`${t} :  ${e}`)).join("\n")}`,"");s=s.trim().replace("，",","),s&&(s=s.split(",").map((t=>Number(t.trim()))).filter((t=>!isNaN(t)&&t>=0&&t<=5)),a=a.filter(((t,e)=>s.includes(e))).sort(((t,e)=>s.indexOf(a.indexOf(t))<s.indexOf(a.indexOf(e))?-1:1)));let c="";const m=Object.assign({imgOpt:{align:"left"}},o);e?a.forEach(((t,e)=>{o.repo=t,n?(m.repo=t,c+=$(e%2==0?m:o),e%2==1&&e!==a.length-1?c+="\n\n<br/><br/>\n\n":c+="\n\n"):(c+=$(o),c+="\n\n")})):c=`${a.map((t=>(o.repo=t,L(o)))).join("\n\n")}\n`;let u=`\x3c!-- GitHub 统计卡片 --\x3e\n\n${w(o)}\n\n\x3c!-- GitHub 热门使用语言卡片 --\x3e\n\n${o.hide=r,y(o)}\n\n\x3c!-- GitHub 置顶仓库卡片 --\x3e\n\n${c}`;const g=document.createElement("div");g.setAttribute("style","max-height:85vh;border-radius:5px;background:rgba(0,0,0,.4);padding:20px;position:fixed;width:500px;max-width:85vw;z-index:999;inset:0;margin:auto;display:flex;flex-flow:wrap column;justify-content:space-around"),g.innerHTML="<textarea style=width:100%;height:360px;font-size:18px;padding:12px;color:#efefef;background:#2b2a33></textarea><div style=text-align:center;width:100%><button style=margin-right:30px;padding:12px;min-width:90px;height:60px;font-size:18px;color:#efefef;background:#2b2a33>复制</button><button style=padding:12px;min-width:90px;height:60px;font-size:18px;color:#efefef;background:#2b2a33>关闭</button></div>";const l=g.querySelector("textarea");l.value=u,g.querySelector("button:last-child").onclick=()=>{g.remove()},g.querySelector("button:first-child").onclick=()=>{l.focus(),l.select(),document.execCommand("copy")},document.documentElement.appendChild(g)}};const{quickGen:v}=k;v()}();
```

演示GIF

[![演示GIF](https://s3.bmp.ovh/imgs/2022/06/08/541881d27e69439b.gif)](https://s3.bmp.ovh/imgs/2022/06/08/541881d27e69439b.gif)

## 函数调用

源文件为`./src/gh-readme-md-gen.js`，使用方法参考`./test.js`

